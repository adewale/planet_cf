<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>{{ planet.name }}</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="generator" content="PlanetCF"/>
    <meta name="description" content="Follow the pulse of the Mozilla project. Aggregated updates from the developers, designers, and volunteers building a better internet."/>
    <meta property="og:site_name" content="{{ planet.name }}"/>
    <meta property="og:title" content="{{ planet.name }}"/>
    <meta property="og:description" content="Follow the pulse of the Mozilla project. Aggregated updates from the developers, designers, and volunteers building a better internet."/>
    <meta property="og:image" content="{{ planet.link }}/static/img/planet_banner.png"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@mozilla"/>
    <meta property="twitter:title" content="{{ planet.name }}"/>
    <meta property="twitter:image" content="{{ planet.link }}/static/img/planet_banner.png"/>
    <link href="/static/style.css" rel="stylesheet" type="text/css"/>
    <link href="/static/favicon.ico" rel="shortcut icon" type="image/png"/>
    <link rel="alternate" href="{{ feed_links.atom or '/feed.atom' }}" title="{{ planet.name }}" type="application/atom+xml"/>
</head>
<body>
    <div id="utility">
        <p><strong>Looking For</strong></p>
        <ul>
            <li><a href="https://www.mozilla.org/">mozilla.org</a></li>
            <li><a href="https://wiki.mozilla.org/">Wiki</a></li>
            <li><a href="https://developer.mozilla.org/">Developer Center</a></li>
            <li><a href="http://www.firefox.com/">Firefox</a></li>
            <li><a href="http://www.getthunderbird.com/">Thunderbird</a></li>
        </ul>
    </div>
    <div id="header">
        <div id="dino">
            <h1><a href="/" title="Back to home page">{{ planet.name }}</a></h1>
        </div>
    </div>
    <div class="main-container">
        <main class="main-content">
{% for date, day_entries in entries_by_date.items() %}
            <h2><time datetime="{{ date }}">{{ date_labels[date] }}</time></h2>
{% for entry in day_entries %}
            <article class="news">
                <h3><a href="{{ entry.feed_site_url or entry.feed_url or '#' }}" title="{{ entry.display_author }}">{{ entry.display_author or 'Unknown' }}</a> â€” <a href="{{ entry.url or '#' }}">{{ entry.title or 'Untitled' }}</a></h3>
                <div class="entry">
                    <div class="content">{{ entry.content | safe }}</div>
                </div>
                <div class="permalink"><a href="{{ entry.url or '#' }}">by {{ entry.display_author }} at <time datetime="{{ entry.published_at }}" title="GMT">{{ entry.published_at_display }}</time></a></div>
            </article>
{% endfor %}
{% else %}
            <p>No entries yet.</p>
{% endfor %}
        </main>
        <div class="sidebar-content">
            <div class="disclaimer">
                <h2>{{ planet.name }}</h2>
                <p>Collected here are the most recent blog posts from all over the Mozilla community.
                   The content here is unfiltered and uncensored, and represents the views of individual community members.
                   Individual posts are owned by their authors -- see original source for licensing information.</p>
            </div>
            <div class="feeds">
                <h2>Subscribe to Planet</h2>
                <p>Feeds:</p>
                <ul>
                    <li><a href="{{ feed_links.atom or '/feed.atom' }}">Atom</a></li>
                    <li><a href="{{ feed_links.rss or '/feed.rss' }}">RSS 2.0</a></li>
                    {% if feed_links.rss10 %}<li><a href="{{ feed_links.rss10 }}">RSS 1.0</a></li>{% endif %}
                </ul>
                <p></p>
                <p>Subscription list:</p>
                <ul>
                    {% if feed_links.foaf %}<li><a href="{{ feed_links.foaf }}">FOAF</a></li>{% endif %}
                    <li class="opml"><a href="{{ feed_links.opml or '/feeds.opml' }}">OPML</a></li>
                </ul>
                <p>Last update: <time datetime="{{ generated_at }}" title="GMT">{{ generated_at }}</time></p>
            </div>
            <div class="main">
                <h2>Other Planets</h2>
                <ul class="planets">
                    <li><a href="https://planet.mozilla.org/projects/">Projects</a></li>
                    <li><a href="https://planet.mozilla.org/participation/">Planet Participation</a></li>
                    <li><a href="https://planet.mozilla.org/thunderbird/">Planet Thunderbird</a></li>
                    <li><a href="https://quality.mozilla.org/">Planet QMO</a></li>
                    <li><a href="https://planet.mozilla.org/ateam/">Planet Automation</a></li>
                    <li><a href="https://planet.mozilla.org/research/">Mozilla Research</a></li>
                </ul>
                {% if not is_lite_mode %}
                <div id="sidebar">
                    <h2>Search</h2>
                    <form action="/search" method="GET">
                        <input name="q" type="search" placeholder="Search..."/>
                        <button type="submit">Search</button>
                    </form>
                </div>
                {% endif %}
                <h2>Subscriptions</h2>
                <ul class="subscriptions">
{% for feed in feeds %}
                    <li>
                        <a title="subscribe" href="{{ feed.url }}"><img src="/static/img/feed-icon-10x10.png" alt="(feed)" width="10" height="10"/></a>
                        <a href="{{ feed.site_url or feed.url or '#' }}"
                           {% if feed.message %}class="{{ 'active message' if feed.recent_entries else 'message' }}" title="{{ feed.message }}"
                           {% elif feed.recent_entries %}class="active" title="{{ feed.title }}"
                           {% else %}title="{{ feed.title }}"
                           {% endif %}>{{ feed.title or 'Untitled' }}</a>
                        {% if feed.recent_entries %}
                        <ul>
                            {% for entry in feed.recent_entries %}
                            <li><a href="{{ entry.url or '#' }}">{{ entry.title }}</a></li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </li>
{% else %}
                    <li>No feeds configured</li>
{% endfor %}
                </ul>
            </div>
            <div class="bottom"></div>
        </div>
    </div>
    <div id="footer">
        <div id="footer-content">
            <p>{{ footer_text }}{% if show_admin_link %} | <a href="/admin">Admin</a>{% endif %}</p>
        </div>
    </div>
    <script>
    // Localize UTC dates to the user's timezone
    (function() {
        var times = document.querySelectorAll('time[datetime]');
        for (var i = 0; i < times.length; i++) {
            var el = times[i];
            var dt = el.getAttribute('datetime');
            if (!dt) continue;
            var d = new Date(dt.indexOf('T') === -1 && dt.indexOf('Z') === -1 ? dt + 'T00:00:00Z' : dt);
            if (isNaN(d.getTime())) continue;
            var parent = el.parentElement;
            if (parent && parent.tagName === 'H2') {
                el.textContent = d.toLocaleDateString(undefined, {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'});
            } else {
                el.textContent = d.toLocaleString(undefined, {year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', timeZoneName: 'short'});
            }
            el.setAttribute('title', dt + ' UTC');
        }
    })();
    </script>
</body>
</html>
