<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>{{ planet.name }}</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="{{ planet.description }}"/>
    <link href="/static/style.css" rel="stylesheet" type="text/css"/>
    <link href="/static/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
    <link rel="alternate" href="{{ feed_links.atom or '/feed.atom' }}" title="{{ planet.name }}" type="application/atom+xml"/>
</head>
<body>
    <div id="utility">
        <p><strong>Looking For</strong></p>
        <ul>
            <li><a href="https://www.mozilla.org/">mozilla.org</a></li>
            <li><a href="https://wiki.mozilla.org/">Wiki</a></li>
            <li><a href="https://developer.mozilla.org/">Developer Center</a></li>
            <li><a href="https://www.mozilla.org/firefox/">Firefox</a></li>
            <li><a href="https://www.thunderbird.net/">Thunderbird</a></li>
        </ul>
    </div>

    <div id="header">
        <div id="dino">
            <h1><a href="/" title="Back to home page">{{ planet.name }}</a></h1>
        </div>
    </div>

    <div class="main-container">
        <div class="main-content">
            {% for date, day_entries in entries_by_date.items() %}
            <h2><time datetime="{{ date }}">{{ date }}</time></h2>
            {% for entry in day_entries %}
            <article class="news {{ entry.display_author | lower | replace(' ', '-') }}">
                <h3><a href="{{ entry.feed_site_url or entry.feed_url or '#' }}" title="{{ entry.display_author }}">{{ entry.display_author or 'Unknown' }}</a> â€” <a href="{{ entry.url or '#' }}">{{ entry.title or 'Untitled' }}</a></h3>
                <div class="entry">
                    <div class="content">{{ entry.content | safe }}</div>
                </div>
                <div class="permalink"><a href="{{ entry.url or '#' }}">by {{ entry.display_author }} at <time datetime="{{ entry.published_at }}" title="GMT">{{ entry.published_at_display }}</time></a></div>
            </article>
            {% endfor %}
            {% else %}
            <p>No entries yet.</p>
            {% endfor %}
        </div>

        <div class="sidebar-content">
            <div class="disclaimer">
                <h2>{{ planet.name }}</h2>
                <p>Collected here are the most recent blog posts from the community.
                   The content here is unfiltered and uncensored, and represents the views of individual community members.</p>
            </div>

            <div class="feeds">
                <h2>Subscribe to Planet</h2>
                <p>Feeds:</p>
                <ul>
                    <li><a href="{{ feed_links.atom or '/feed.atom' }}">Atom</a></li>
                    <li><a href="{{ feed_links.rss or '/feed.rss' }}">RSS 2.0</a></li>
                </ul>
                <p>Subscription list:</p>
                <ul>
                    <li class="opml"><a href="{{ feed_links.opml or '/feeds.opml' }}">OPML</a></li>
                </ul>
                <p>Last update: <time datetime="{{ generated_at }}" title="GMT">{{ generated_at }}</time></p>
            </div>

            <div class="main">
                {% if related_sites %}
                {% for section in related_sites %}
                <h2>{{ section.title }}</h2>
                <ul class="planets">
                    {% for link in section.links %}
                    <li><a href="{{ link.url }}">{{ link.name }}</a></li>
                    {% endfor %}
                </ul>
                {% endfor %}
                {% endif %}

                {% if not is_lite_mode %}
                <div id="sidebar">
                    <h2>Search</h2>
                    <form action="/search" method="GET" class="search-form">
                        <input name="q" type="search" placeholder="Search..."/>
                        <button type="submit">Search</button>
                    </form>
                </div>
                {% endif %}

                <h2>Subscriptions</h2>
                <ul class="subscriptions">
                    {% for feed in feeds %}
                    <li><a href="{{ feed.site_url or feed.url or '#' }}" title="{{ feed.title }}">{{ feed.title or 'Untitled' }}</a></li>
                    {% else %}
                    <li>No feeds configured</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div id="footer">
        <div id="footer-content">
            <p>
                {{ footer_text }}
                {% if show_admin_link %} | <a href="/admin">Admin</a>{% endif %}
            </p>
        </div>
    </div>

    <!-- Keyboard shortcuts help panel -->
    <div class="shortcuts-backdrop hidden" id="shortcuts-backdrop"></div>
    <div class="shortcuts-panel hidden" id="shortcuts-panel" role="dialog" aria-labelledby="shortcuts-title" aria-modal="true">
        <h3 id="shortcuts-title">Keyboard Shortcuts</h3>
        <dl>
            <dt><kbd>j</kbd></dt>
            <dd>Next entry</dd>
            <dt><kbd>k</kbd></dt>
            <dd>Previous entry</dd>
            <dt><kbd>?</kbd></dt>
            <dd>Toggle this help</dd>
            <dt><kbd>Esc</kbd></dt>
            <dd>Close help</dd>
        </dl>
        <button type="button" class="close-btn" id="close-shortcuts">Close</button>
    </div>

    <script src="/static/keyboard-nav.js"></script>
</body>
</html>
